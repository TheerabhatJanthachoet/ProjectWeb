<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>หอพักวศิน</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
    <link href="index.css" rel="stylesheet" />
    <link href="Login.html" />
    <link href="bootstrap-datepicker.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit&display=swap"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
      /* เพิ่มสไตล์เพื่อเน้นหัวข้อที่เป็นหัวเรื่อง */
      th.sortable {
        cursor: pointer;
      }
    </style>
    <link href="jquery-ui.css" rel="stylesheet" />
  </head>
  <body style="font-family: 'Kanit', sans-serif">
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>

    <!-- เมนู -->
    <nav
      class="navbar navbar-expand-sm navbar-light fixed-top shadow p-3 bg-body rounded"
      style="background-color: white"
    >
      <div class="container-fluid">
        <a class="navbar-brand fw-bold">
          <img
            src="Picture/WasinLogo.png"
            width="40%"
            height="40%"
            class="d-inline-block align-text-center"
          />
          หอพักวศิน
        </a>
        <button
          class="navbar-toggler"
          data-bs-toggle="collapse"
          data-bs-target="#navbartoggle"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse justify-content-end"
          id="navbartoggle"
        >
          <ul class="nav navbar-nav fw-bolder fs-5">
            <li class="nav-item nav-link">
              <a href="Admin.html" class="nav-link" style="color: #ff8c00"
                >ข้อมูลผู้พัก</a
              >
            </li>
            <li class="nav-item nav-link">
              <a href="AdminRoom.html" class="nav-link">ข้อมูลห้อง</a>
            </li>
            <li class="nav-item nav-link">
              <a href="AdminBill.html" class="nav-link">ออกบิล</a>
            </li>
            <li class="nav-item nav-link">
              <a href="AdminReport.html" class="nav-link">รายงาน</a>
            </li>
            <li class="nav-item nav-link">
              <a href="/" class="nav-link">ออกจากระบบ</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- จบเมนู -->

    <section
      id="Home"
      class="h-100 min-vh-100"
      style="background-color: #ff8c00; margin-top: 100px"
    >
      <div class="py-5 p-5">
        <div class="row d-flex justify-content-center">
          <div class="">
            <div
              style="border-radius: 1rem; background-color: white"
              class="d-flex flex-column gap-3 p-4"
            >
              <div class="">
                <div class="row h-50">
                  <div class="col-md-12 col-lg-5">
                    <!-- <form class="d-flex p-2">
                    <input class="form-control me-2"
                      type="search"
                      placeholder="*เลขสัญญา*"
                      aria-label="Search"
                    />
                    <button class="btn btn-outline-warning" type="submit">
                      ค้นหา
                    </button>
                  </form> -->
                  </div>
                </div>
                <div class="row h-50">
                  <div class="col-md-12 col-lg-5">
                    <button
                      class="btn btn-success btn-lg"
                      data-bs-toggle="modal"
                      data-bs-target="#addcontract"
                      type="submit"
                    >
                      เพิ่มสัญญา
                    </button>
                    <button
                      class="btn btn-danger btn-lg"
                      data-bs-toggle="modal"
                      data-bs-target="#checkoutcontract"
                      type="submit"
                    >
                      แจ้งย้ายออก
                    </button>
                  </div>
                </div>
              </div>
              <div class="table-responsive overflow-auto text-nowrap">
                <table id="tableList" class="table table-striped">
                  <thead>
                    <tr>
                      <th class="text-center sortable">ห้อง</th>
                      <th class="text-center sortable">ชื่อ</th>
                      <th class="text-center sortable">นามสกุล</th>
                      <th class="text-center sortable">จำนวนผู้เข้าพัก</th>
                      <th class="text-center sortable">เบอร์โทรศัพท์</th>
                      <th class="text-center sortable">วัน/เดือน/ปี เกิด</th>
                      <th class="text-center sortable">เลขบัตรประชาชน</th>
                      <th class="text-center sortable">ที่อยู่</th>
                      <th class="text-center sortable">วันที่ทำสัญญา</th>
                      <th class="text-center sortable">เวลาสัญญาที่เหลือ</th>
                      <th class="text-center sortable">วันที่เข้าพัก</th>
                      <th class="text-center sortable">วันที่ย้ายออก</th>
                      <th class="text-center sortable">ยานพหนะ</th>
                      <th class="text-center sortable">ทะเบียน</th>
                      <th class="text-left sortable">ใบสัญญา</th>
                    </tr>
                  </thead>
                  <tbody id="tableListBody">
                    <!-- ข้อมูลแถวตามต้องการ -->
                  </tbody>
                </table>
              </div>
            </div>
            <!-- Modal Add -->
            <div
              class="modal fade"
              id="addcontract"
              tabindex="-1"
              aria-labelledby="addcontractLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="addcontractLabel">
                      เพิ่มสัญญา
                    </h5>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>

                  <div class="modal-body">
                    <form class="row g-3">
                      <div class="col-md-3">
                        <label for="roomNew" class="form-label">ห้อง</label>
                        <select
                          class="form-select"
                          id="roomNew"
                          required
                        ></select>
                      </div>

                      <div class="col-md-4">
                        <label for="GuestFirstname" class="form-label"
                          >ชื่อ</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="GuestFirstname"
                          maxlength="50"
                          placeholder="ชื่อจริง"
                          required
                        />
                      </div>

                      <div class="col-md-4">
                        <label for="Lastname" class="form-label">นามสกุล</label>
                        <input
                          type="text"
                          class="form-control"
                          id="Lastname"
                          maxlength="50"
                          placeholder="นามสกุล"
                          required
                        />
                      </div>

                      <script>
                        // Add input event listeners to the "GuestFirstname" and "Lastname" input fields
                        document
                          .getElementById("GuestFirstname")
                          .addEventListener("input", restrictSpecialCharacters);
                        document
                          .getElementById("Lastname")
                          .addEventListener("input", restrictSpecialCharacters);

                        function restrictSpecialCharacters(event) {
                          const input = event.target.value;
                          const validInput = /^[a-zA-Zก-๙ ]*$/.test(input); // Use regex to check if the input contains only letters and spaces (including Thai characters)

                          if (!validInput) {
                            // If the input contains numbers or special characters, prevent the default behavior and set the input value to the valid characters only
                            event.preventDefault();
                            const validCharacters = input.replace(
                              /[^a-zA-Zก-๙ ]/g,
                              ""
                            ); // Remove any characters that are not letters or spaces
                            event.target.value = validCharacters;
                          }
                        }
                      </script>

                      <div class="col-md-3">
                        <label for="Amount" class="form-label"
                          >จำนวนผู้พัก</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="Amount"
                          maxlength="1"
                          placeholder="0"
                          required
                        />
                      </div>

                      <script>
                        // Add an input event listener to the "Amount" input field
                        document
                          .getElementById("Amount")
                          .addEventListener("input", function (event) {
                            const input = event.target.value;
                            const validNumber = /^[1-9]$/.test(input); // Use regex to check if the input is a number between 1 and 9

                            if (!validNumber) {
                              // If the input is not a valid number (1-9), prevent the default behavior and set the input value to the nearest valid value (either 1 or 9)
                              event.preventDefault();
                              event.target.value =
                                Math.max(1, Math.min(9, parseInt(input))) || ""; // Use Math.min and Math.max to limit the value to the desired range
                            }
                          });
                      </script>

                      <div class="col-md-4">
                        <label for="Phone" class="form-label"
                          >เบอร์โทรศัพท์</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="Phone"
                          maxlength="10"
                          placeholder="เบอร์โทรศัพท์"
                          required
                        />
                      </div>

                      <script>
                        // Add an input event listener to the "Phone" input field
                        document
                          .getElementById("Phone")
                          .addEventListener("input", restrictCharacters);

                        function restrictCharacters(event) {
                          const input = event.target.value;
                          const validInput = /^[0-9]*$/.test(input); // Use regex to check if the input contains only numbers

                          if (!validInput) {
                            // If the input contains characters other than numbers, prevent the default behavior and set the input value to the valid characters only
                            event.preventDefault();
                            const validCharacters = input.replace(
                              /[^0-9]/g,
                              ""
                            ); // Remove any characters that are not numbers
                            event.target.value = validCharacters;
                          }
                        }
                      </script>

                      <div id="datepicker" class="date col-md-4">
                        <label for="DobDate" class="form-label">วันเกิด</label>
                        <input
                          type="text" id="DobDate"
                          data-provide="datepicker"
                          data-date-format="dd/mm/yyyy"
                          data-date-autoclose="true"
                          class="form-control"
                          placeholder="dd/mm/yyyy"
                        />
                      </div>

                      <div class="col-md-5">
                        <label for="IDcard" class="form-label"
                          >เลขบัตรประชาชน</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="IDcard"
                          maxlength="13"
                          placeholder="เลขบัตรประชาชน"
                          required
                        />
                      </div>

                      <!-- <script>
                        // Add an input event listener to the "IDcard" input field
                        document
                          .getElementById("IDcard")
                          .addEventListener("input", restrictCharacters);

                        function restrictCharacters(event) {
                          const input = event.target.value;
                          const validInput = /^[0-9]*$/.test(input); // Use regex to check if the input contains only numbers

                          if (!validInput) {
                            // If the input contains characters other than numbers, prevent the default behavior and set the input value to the valid characters only
                            event.preventDefault();
                            const validCharacters = input.replace(
                              /[^0-9]/g,
                              ""
                            ); // Remove any characters that are not numbers
                            event.target.value = validCharacters;
                          }
                        }
                      </script> -->

                      <div class="col-md-12">
                        <label for="Address" class="form-label">ที่อยู่</label>
                        <input
                          type="text"
                          class="form-control"
                          id="Address"
                          placeholder="ที่อยู่ผู้ทำสัญญา"
                          required
                        />
                      </div>

                      <div class="col-md-4">
                        <label for="Contactdate" class="form-label"
                          >วันที่ทำสัญญา</label
                        >
                        <input
                          name="dates"
                          type="text"
                          class="form-control"
                          id="Contactdate"
                          data-provide="datepicker"
                          data-date-format="dd/mm/yyyy"
                          data-date-autoclose="true"
                          placeholder="dd/mm/yyyy"
                          required
                        />
                      </div>

                      <div id="datepicker" class="col-md-4">
                        <label for="Checkin" class="form-label">วันที่เข้าพัก</label>
                        <input
                          name="dates"
                          type="text"
                          class="form-control"
                          id="Checkin"
                          data-provide="datepicker"
                          data-date-format="dd/mm/yyyy"
                          data-date-autoclose="true"
                          placeholder="dd/mm/yyyy"
                          required
                        />
                      </div>
                      <div class="row p-3">
                        <div class="col-md-4">
                          <label for="CarType" class="form-label"
                            >ประเภทยานพาหนะ</label
                          >
                          <select class="form-select" id="CarType">
                            <option value="-">-</option>
                            <option value="รถยนต์">รถยนต์</option>
                            <option value="จักรยานยนต์">จักรยานยนต์</option>
                          </select>
                        </div>

                        <div class="col-md-4">
                          <label for="CarID" class="form-label">ทะเบียน</label>
                          <input
                            type="text"
                            class="form-control"
                            id="CarID"
                            maxlength="10"
                            placeholder="ป้ายทะเบียน"
                          />
                        </div>
                      </div>

                      <div class="mb-3">
                        <label for="contactpic" class="form-label" style="color: red;"
                          >ไฟล์ข้อมูลสัญญาเช่า (*รับเฉพาะไฟล์ PDF ภาษาอังกฤษเท่านั้น)</label
                        >
                        <input
                          class="form-control"
                          type="file"
                          id="contactpic"
                          accept=".pdf"
                          required
                        />
                      </div>

                      <div class="modal-footer">
                        <button
                          type="button"
                          class="btn btn-danger"
                          data-bs-dismiss="modal"
                        >
                          ยกเลิก
                        </button>
                        <button
                          type="button"
                          class="btn btn-success"
                          id="savecontact"
                        >
                          บันทึก
                        </button>
                      </div>
                      .
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <!-- Modal Add-->

            <!-- Modal Out -->
            <div
              class="modal fade"
              id="checkoutcontract"
              tabindex="-1"
              aria-labelledby="checkoutLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="checkoutLabel">แจ้งย้ายออก</h5>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>

                  <div class="modal-body">
                    <form class="row g-3">
                      <div class="col-md-4">
                        <label for="checkoutFloor" class="form-label"
                          >ชั้น</label
                        >
                        <select
                          class="form-select"
                          id="checkoutFloor"
                          onchange="CheckoutRoomNumberOptions()"
                        >
                          <option value="0"></option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                        </select>
                      </div>

                      <div class="col-md-4">
                        <label for="Roomcheckout" class="form-label"
                          >ห้อง</label
                        >
                        <select
                          class="form-select"
                          id="Roomcheckout"
                          required
                        ></select>
                      </div>

                      <div class="col-md-4">
                        <label for="Checkout" class="form-label"
                          >วันที่แจ้งย้ายออก</label
                        >
                        <input
                          name="dates"
                          type="date"
                          class="form-control"
                          id="Checkout"
                        />
                      </div>

                      <div class="modal-footer">
                        <button
                          type="button"
                          class="btn btn-danger"
                          data-bs-dismiss="modal"
                        >
                          ยกเลิก
                        </button>
                        <button
                          type="button"
                          class="btn btn-success"
                          id="Checkoutsave"
                        >
                          บันทึก
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <!-- Modal Out-->
          </div>
        </div>
      </div>
    </section>
    
    <script src="bootstrap-datepicker.js"></script>
    <script src="Admin.js"></script>
  </body>
</html>
