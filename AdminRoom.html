<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>หอพักวศิน</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
    <link href="test2.css" rel="stylesheet" />
    <link href="Login.html" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/mssql"></script>

    <title>Sortable Table Example</title>
    <!-- เพิ่มลิงก์ไปยังไฟล์ jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
      /* เพิ่มสไตล์เพื่อเน้นหัวข้อที่เป็นหัวเรื่อง */
      th {
        cursor: pointer;
      }
    </style>
  </head>

  <body style="font-family: 'Kanit', sans-serif">
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>

    <!-- เมนู -->
    <nav
      class="navbar navbar-expand-sm navbar-light fixed-top shadow p-3 mb-5 bg-body rounded"
      style="background-color: white"
    >
      <div class="container-fluid">
        <a class="navbar-brand fw-bold">
          <img
            src="Picture/WasinLogo.png"
            width="40%"
            height="40%"
            class="d-inline-block align-text-center"
          />
          หอพักวศิน
        </a>
        <button
          class="navbar-toggler"
          data-bs-toggle="collapse"
          data-bs-target="#navbartoggle"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse justify-content-end"
          id="navbartoggle"
        >
          <ul class="nav navbar-nav fw-bolder fs-5">
            <li class="nav-item nav-link">
              <a href="Admin.html" class="nav-link">ข้อมูลผู้พัก</a>
            </li>
            <li class="nav-item nav-link">
              <a href="AdminRoom.html" class="nav-link" style="color: #ff8c00"
                >ข้อมูลห้อง</a
              >
            </li>
            <li class="nav-item nav-link">
              <a href="AdminBill.html" class="nav-link">ออกบิล</a>
            </li>
            <li class="nav-item nav-link">
              <a href="AdminReport.html" class="nav-link">รายงาน</a>
            </li>
            <li class="nav-item nav-link">
              <a href="/" class="nav-link">ออกจากระบบ</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- จบเมนู -->

    <section
      id="Home"
      class="vh-100"
      style="background-color: #ff8c00; margin-top: 100px"
    >
      <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center h-100">
          <div class="col col-xxl-12 h-75">
            <div
              class="d-flex flex-column p-4 gap-1"
              style="border-radius: 1rem; background-color: white"
            >
              <!-- <div class="row">
                <div class="col-md-12 col-lg-5">
                  <form class="d-flex p-2">
                    <input
                      class="form-control me-2"
                      type="search"
                      placeholder="*เลขห้อง*"
                      aria-label="Search"
                    />
                    <button class="btn btn-outline-warning" type="submit">
                      ค้นหา
                    </button>
                  </form>
                </div>
              </div> -->

              <div class="row">
                <div class="col-md-12 col-lg-5">
                  <button
                    type="button"
                    class="btn btn-success btn-lg"
                    data-bs-toggle="modal"
                    data-bs-target="#addRoomModal"
                  >
                    เพิ่มห้องพักใหม่
                  </button>
                  <button
                    type="button"
                    class="btn btn-primary btn-lg"
                    data-bs-toggle="modal"
                    data-bs-target="#editRoomModal"
                  >
                    แก้ไขข้อมูลห้องพัก
                  </button>
                </div>
              </div>

              <!-- Modal Add -->
              <div
                class="modal fade"
                id="addRoomModal"
                tabindex="-1"
                aria-labelledby="addRoomModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="addRoomModalLabel">
                        เพิ่มห้องพัก
                      </h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      <div class="mb-3">
                        <label for="roomNumber" class="form-label"
                          >เลขห้องพัก</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="roomNumber"
                          placeholder="หมายเลขห้องพัก"
                          maxlength="3"
                          required
                        />
                      </div>

                      <script>
                        // Add an input event listener to the "roomNumber" input field
                        document
                          .getElementById("roomNumber")
                          .addEventListener("input", restrictCharacters);

                        function restrictCharacters(event) {
                          const input = event.target.value;
                          const validInput = /^[0-9]*$/.test(input); // Use regex to check if the input contains only numbers

                          if (!validInput) {
                            // If the input contains characters other than numbers, prevent the default behavior and set the input value to the valid characters only
                            event.preventDefault();
                            const validCharacters = input.replace(
                              /[^0-9]/g,
                              ""
                            ); // Remove any characters that are not numbers
                            event.target.value = validCharacters;
                          }
                        }
                      </script>

                      <div class="mb-3">
                        <label for="roomFloor" class="form-label">ชั้น</label>
                        <select class="form-select" id="roomFloor">
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                        </select>
                      </div>

                      <div class="mb-3">
                        <label for="roomType" class="form-label"
                          >ประเภทห้อง</label
                        >
                        <select class="form-select" id="roomType">
                          <option value="พัดลม">พัดลม</option>
                          <option value="แอร์">แอร์</option>
                        </select>
                      </div>

                      <div class="mb-3">
                        <label for="price" class="form-label">ค่าเช่า</label>
                        <input
                          type="text"
                          class="form-control"
                          id="price"
                          placeholder="ค่าห้องพักต่อเดือน"
                          maxlength="4"
                        />
                      </div>

                      <script>
                        // Add an input event listener to the "roomNumber" input field
                        document
                          .getElementById("price")
                          .addEventListener("input", restrictCharacters);

                        function restrictCharacters(event) {
                          const input = event.target.value;
                          const validInput = /^[0-9]*$/.test(input); // Use regex to check if the input contains only numbers

                          if (!validInput) {
                            // If the input contains characters other than numbers, prevent the default behavior and set the input value to the valid characters only
                            event.preventDefault();
                            const validCharacters = input.replace(
                              /[^0-9]/g,
                              ""
                            ); // Remove any characters that are not numbers
                            event.target.value = validCharacters;
                          }
                        }
                      </script>

                      <div class="mb-3">
                        <label for="guestCount" class="form-label"
                          >จำนวนผู้เช่า</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="guestCount"
                          value="0"
                          placeholder="0"
                          maxlength="1"
                          
                          required
                        />
                      </div>

                      <div class="mb-3">
                        <label for="electricityUnit" class="form-label"
                          >เลขมิเตอร์ไฟเดิม</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="electricityUnit"
                          placeholder="0"
                          maxlength="6"
                          required
                        />
                      </div>

                      <script>
                        // Add an input event listener to the "roomNumber" input field
                        document
                          .getElementById("guestCount")
                          .addEventListener("input", restrictCharacters);
                        document
                          .getElementById("electricityUnit")
                          .addEventListener("input", restrictCharacters);

                        function restrictCharacters(event) {
                          const input = event.target.value;
                          const validInput = /^[0-9]*$/.test(input); // Use regex to check if the input contains only numbers

                          if (!validInput) {
                            // If the input contains characters other than numbers, prevent the default behavior and set the input value to the valid characters only
                            event.preventDefault();
                            const validCharacters = input.replace(
                              /[^0-9]/g,
                              ""
                            ); // Remove any characters that are not numbers
                            event.target.value = validCharacters;
                          }
                        }
                      </script>

                      <div class="mb-3">
                        <label for="status" class="form-label">สถานะการเช่า</label>
                        <select class="form-select" id="status">
                          <option value="ว่าง">ว่าง</option>
                          <option value="ไม่ว่าง">ไม่ว่าง</option>
                          <option value="ปรับปรุง">ปรับปรุง</option>
                        </select>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                      >
                        ปิด
                      </button>
                      <button
                        type="button"
                        class="btn btn-primary"
                        id="saveButton"
                        onclick="addRoom()"
                      >
                        บันทึก
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- END Modal Add -->

              <!-- Modal Edit -->
              <div
                class="modal fade"
                id="editRoomModal"
                tabindex="-1"
                aria-labelledby="editRoomModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="editRoomModalLabel">
                        แก้ไขข้อมูลห้องพัก
                      </h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      <!-- แก้ไขเนื้อหาภายใน Modal ตามที่ต้องการ -->
                      <div class="mb-3">
                        <label for="editroomFloor" class="form-label"
                          >ชั้น</label
                        >
                        <select
                          class="form-select"
                          id="editroomFloor"
                          onchange="updateRoomNumberOptions()"
                        >
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                        </select>
                      </div>

                      <div class="mb-3">
                        <label for="editroomNumber" class="form-label"
                          >เลขห้อง</label
                        >
                        <select class="form-select" id="editroomNumber">
                          <!-- ตัวเลือกของเลขห้องจะถูกอัปเดตโดย JavaScript -->
                        </select>
                      </div>

                      <div class="mb-3">
                        <label for="editroomType" class="form-label"
                          >ประเภทห้อง</label
                        >
                        <select class="form-select" id="editroomType">
                          <option value="พัดลม">พัดลม</option>
                          <option value="แอร์">แอร์</option>
                        </select>
                      </div>

                      <div class="mb-3">
                        <label for="editprice" class="form-label">ค่าเช่าห้อง</label>
                        <input
                          type="text"
                          class="form-control"
                          id="editprice"
                          value="1800"
                        />
                      </div>

                      <div class="mb-3">
                        <label for="editguestName" class="form-label"
                          >ชื่อผู้พัก</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="editguestName"
                          placeholder="ชื่อจริง"
                          maxlength="50"
                        />
                      </div>
                      <div class="mb-3">
                        <label for="editguestLastName" class="form-label"
                          >นามสกุล</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="editguestLastName"
                          placeholder="นามสกุล"
                          maxlength="50"
                        />
                      </div>

                      <script>
                        // Add input event listeners to the "guestName" and "guestLastName" input fields
                        document
                          .getElementById("editguestName")
                          .addEventListener("input", restrictCharacters);
                        document
                          .getElementById("editguestLastName")
                          .addEventListener("input", restrictCharacters);

                        function restrictCharacters(event) {
                          const input = event.target.value;
                          const validInput = /^[a-zA-Zก-๙ ]*$/.test(input); // Use regex to check if the input contains only Thai characters or English letters

                          if (!validInput) {
                            // If the input contains numbers or special characters, prevent the default behavior and set the input value to the valid characters only
                            event.preventDefault();
                            const validCharacters = input.replace(
                              /[^a-zA-Zก-๙ ]/g,
                              ""
                            ); // Remove any characters that are not Thai characters or English letters
                            event.target.value = validCharacters;
                          }
                        }
                      </script>

                      <div class="mb-3">
                        <label for="editguestCount" class="form-label"
                          >จำนวนผู้เช่า</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="editguestCount"
                          placeholder="0"
                          maxlength="1"
                          required
                        />
                      </div>

                      <div class="mb-3">
                        <label for="editelectricityUnit" class="form-label"
                          >เลขมิเตอร์ไฟเดิม</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="editelectricityUnit"
                          placeholder="0"
                          maxlength="6"
                          required
                        />
                      </div>

                      <script>
                        // Add an input event listener to the "roomNumber" input field
                        document
                          .getElementById("editguestCount")
                          .addEventListener("input", restrictCharacters);
                        document
                          .getElementById("editelectricityUnit")
                          .addEventListener("input", restrictCharacters);

                        function restrictCharacters(event) {
                          const input = event.target.value;
                          const validInput = /^[0-9]*$/.test(input); // Use regex to check if the input contains only numbers

                          if (!validInput) {
                            // If the input contains characters other than numbers, prevent the default behavior and set the input value to the valid characters only
                            event.preventDefault();
                            const validCharacters = input.replace(
                              /[^0-9]/g,
                              ""
                            ); // Remove any characters that are not numbers
                            event.target.value = validCharacters;
                          }
                        }
                      </script>

                      <div class="mb-3">
                        <label for="editstatus" class="form-label">สถานะการเช่า</label>
                        <select class="form-select" id="editstatus">
                          <option value="ว่าง">ว่าง</option>
                          <option value="ไม่ว่าง">ไม่ว่าง</option>
                          <option value="ปรับปรุง">ปรับปรุง</option>
                        </select>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                      >
                        ปิด
                      </button>
                      <button
                        type="button"
                        class="btn btn-primary"
                        id="editButton"
                      >
                        บันทึก
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- END Modal Edit -->

              <div class="table-responsive overflow-auto text-nowrap">
                <table id="roomList" class="table">
                  <thead>
                    <tr>
                      <th class="text-center sortable">เลขห้อง</th>
                      <th class="text-center sortable">ชั้น</th>
                      <th class="text-center sortable">ประเภทห้องพัก</th>
                      <th class="text-center sortable">ค่าเช่าห้องพัก</th>
                      <th class="text-center sortable">ชื่อ</th>
                      <th class="text-center sortable">นามสกุล</th>
                      <th class="text-center sortable">จำนวนผู้พักอาศัย</th>
                      <th class="text-center sortable">สถานะห้องพัก</th>
                    </tr>
                  </thead>
                  <tbody id="tableList">
                    <!-- แถวของตาราง -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script src="AdminRoom.js"></script>
  </body>
</html>
